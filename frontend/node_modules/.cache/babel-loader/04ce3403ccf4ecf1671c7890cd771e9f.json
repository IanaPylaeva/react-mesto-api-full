{"ast":null,"code":"import _objectSpread from\"C:/Users/\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._serverUrl=options.serverUrl;this._headers=options.headers;}_createClass(Api,[{key:\"_checkCorrectness\",value:/* Ответ от сервера всегда проверяется на корректность */function _checkCorrectness(res){if(res.ok){return res.json();}// если ошибка, отклоняем промис\nreturn Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"_getHeaders\",value:function _getHeaders(){var jwt=localStorage.getItem('jwt');return _objectSpread({authorization:\"Bearer \".concat(jwt)},this._headers);}/* Получить карточки с сервера */},{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this._serverUrl,\"/cards\"),{mode:'cors',method:'GET',headers:this._getHeaders()}).then(this._checkCorrectness);}},{key:\"getUserData\",value:/* Получить информацию о пользователе с сервера */function getUserData(){return fetch(\"\".concat(this._serverUrl,\"/users/me\"),{method:'GET',headers:this._getHeaders()}).then(this._checkCorrectness);}},{key:\"patchUserInfo\",value:/* Установить обновленные данные пользователя на сервер */function patchUserInfo(data){return fetch(\"\".concat(this._serverUrl,\"/users/me\"),{method:'PATCH',headers:this._getHeaders(),body:JSON.stringify({name:data.name,about:data.about})}).then(this._checkCorrectness);}},{key:\"patchUserAvatar\",value:/* Установить аватар пользователя на сервере */function patchUserAvatar(data){return fetch(\"\".concat(this._serverUrl,\"/users/me/avatar\"),{method:'PATCH',headers:this._getHeaders(),body:JSON.stringify({avatar:data.avatar})}).then(this._checkCorrectness);}},{key:\"postCard\",value:/* Отправить данные новой карточки на сервер */function postCard(card){return fetch(\"\".concat(this._serverUrl,\"/cards\"),{method:'POST',headers:this._getHeaders(),body:JSON.stringify({name:card.name,link:card.link})}).then(this._checkCorrectness);}},{key:\"deleteCard\",value:/* Удалить карточку с сервера */function deleteCard(id){return fetch(\"\".concat(this._serverUrl,\"/cards/\").concat(id),{method:'DELETE',headers:this._getHeaders()}).then(this._checkCorrectness);}},{key:\"putLike\",value:/* Поставить лайк */function putLike(id){return fetch(\"\".concat(this._serverUrl,\"/cards/\").concat(id,\"/likes\"),{method:'PUT',headers:this._getHeaders()}).then(this._checkCorrectness);}},{key:\"deleteLike\",value:/* Удалить лайк */function deleteLike(id){return fetch(\"\".concat(this._serverUrl,\"/cards/\").concat(id,\"/likes\"),{method:'DELETE',headers:this._getHeaders()}).then(this._checkCorrectness);}}]);return Api;}();;var api=new Api({serverUrl:'https://domain.ianapylaeva.bcknd.nomoredomains.xyz',headers:{'Content-Type':'application/json'}});export default api;","map":{"version":3,"sources":["C:/Users/пользователь/dev/react-mesto-api-full/frontend/src/utils/api.js"],"names":["Api","options","_serverUrl","serverUrl","_headers","headers","res","ok","json","Promise","reject","status","jwt","localStorage","getItem","authorization","fetch","mode","method","_getHeaders","then","_checkCorrectness","data","body","JSON","stringify","name","about","avatar","card","link","id","api"],"mappings":"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","sourcesContent":["class Api {\r\n  constructor(options) {\r\n    this._serverUrl = options.serverUrl;\r\n    this._headers = options.headers;\r\n  };\r\n\r\n  /* Ответ от сервера всегда проверяется на корректность */\r\n  _checkCorrectness(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    // если ошибка, отклоняем промис\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  };\r\n  \r\n  _getHeaders(){\r\n    const jwt = localStorage.getItem('jwt');\r\n    return {authorization: `Bearer ${jwt}`, ...this._headers}\r\n  }\r\n  \r\n\r\n  /* Получить карточки с сервера */\r\n  getInitialCards() {\r\n    return fetch(`${this._serverUrl}/cards`, {\r\n      mode: 'cors',\r\n      method: 'GET',\r\n      headers: this._getHeaders(),\r\n    })\r\n    .then(this._checkCorrectness);\r\n  };\r\n \r\n  /* Получить информацию о пользователе с сервера */\r\n  getUserData() {\r\n    return fetch(`${this._serverUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._getHeaders(),\r\n    })\r\n    .then(this._checkCorrectness);\r\n  };\r\n\r\n  /* Установить обновленные данные пользователя на сервер */\r\n  patchUserInfo(data) {\r\n    return fetch(`${this._serverUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about,\r\n      })\r\n    })\r\n    .then(this._checkCorrectness);\r\n  };\r\n\r\n  /* Установить аватар пользователя на сервере */\r\n  patchUserAvatar(data) {\r\n    return fetch(`${this._serverUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({\r\n        avatar: data.avatar,\r\n      })\r\n    })\r\n    .then(this._checkCorrectness);\r\n  };\r\n\r\n  /* Отправить данные новой карточки на сервер */\r\n  postCard(card) {\r\n    return fetch(`${this._serverUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({\r\n        name: card.name,\r\n        link: card.link,\r\n      })\r\n    })\r\n    .then(this._checkCorrectness);\r\n  };\r\n\r\n  /* Удалить карточку с сервера */\r\n  deleteCard(id) {\r\n    return fetch(`${this._serverUrl}/cards/${id}`, {\r\n    method: 'DELETE',\r\n    headers: this._getHeaders(),\r\n    })\r\n    .then(this._checkCorrectness);\r\n  };\r\n\r\n  /* Поставить лайк */\r\n  putLike(id) {\r\n    return fetch(`${this._serverUrl}/cards/${id}/likes`, {\r\n    method: 'PUT',\r\n    headers: this._getHeaders(),\r\n    })\r\n    .then(this._checkCorrectness);\r\n  };\r\n\r\n  /* Удалить лайк */\r\n  deleteLike(id) {\r\n    return fetch(`${this._serverUrl}/cards/${id}/likes`, {\r\n    method: 'DELETE',\r\n    headers: this._getHeaders(),\r\n    })\r\n    .then(this._checkCorrectness);\r\n  };\r\n};\r\n\r\nconst api = new Api({\r\n  serverUrl: 'https://domain.ianapylaeva.bcknd.nomoredomains.xyz',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport default api;\r\n"]},"metadata":{},"sourceType":"module"}